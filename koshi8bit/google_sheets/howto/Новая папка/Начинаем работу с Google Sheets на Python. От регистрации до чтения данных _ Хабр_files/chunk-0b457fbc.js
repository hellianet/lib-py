(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b457fbc"],{"3cb0":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"hotkey",rawName:"v-hotkey",value:{esc:function(){return t.$emit("close")}},expression:"{ esc: () => $emit('close') }"}],ref:"wrapper",staticClass:"tm-popover",class:t.bem("tm-popover",{variant:t.variant})},[t._t("default")],2)},r=[],s=o("39c3"),i=o("cee5"),c={name:"TMPopover",props:{placement:{type:String,default:"bottom-start"},offset:{type:Array,default:function(){return[0,8]}},root:{type:"undefined"===typeof window?null:HTMLElement,required:!0},variant:{type:String,default:null}},data:function(){return{popper:null}},mounted:function(){document.addEventListener("click",this.handleOuterClick),this.popper=Object(s["a"])(this.root,this.$refs.wrapper,{placement:this.placement,modifiers:[{name:"offset",options:{offset:this.offset}}]})},beforeDestroy:function(){var t=this;if(document.removeEventListener("click",this.handleOuterClick),this.popper){var e=this.$refs.wrapper;getComputedStyle(e).transition?(e.addEventListener("transitionend",(function(){t.popper.destroy()})),e.addEventListener("transitioncancel",(function(){t.popper.destroy()}))):this.popper.destroy()}},methods:{bem:i["a"],handleOuterClick:function(t){this.root.contains(t.target)||this.$refs.wrapper.contains(t.target)||this.$emit("close")}}},a=c,u=(o("f877"),o("2877")),m=Object(u["a"])(a,n,r,!1,null,null,null);e["a"]=m.exports},"3d84":function(t,e,o){},"79f0":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tm-comment"},[o("header",{ref:"commentHeader",staticClass:"tm-comment__header",class:t.className,attrs:{"data-comment-header":"",tabindex:"-1"}},[o("div",{staticClass:"tm-comment__header-inner"},[o("TMUserInfo",{ref:"userInfo",staticClass:"tm-comment__user-info",attrs:{author:t.comment.author,avatar:t.comment.author.avatarUrl},on:{mouseenter:t.onUserMouseenter,mouseleave:t.onUserMouseleave}},[t._t("comment-link",(function(){return[o("a",{staticClass:"tm-comment__datetime",attrs:{href:"#comment_"+t.comment.id}},[t._v("\n            "+t._s(t.msg("DATE_FORMAT",t.datetimeStr))+"\n          ")])]}),{datetimeStr:t.datetimeStr})],2),o("transition",{attrs:{name:"transition-fade"}},[t.userPopoverEnabled&&t.userInfoPopupVisible?o("TMUserInfoPopup",{ref:"userInfoPopup",attrs:{root:t.$refs.userInfo.$el,"user-alias":t.comment.author.alias}}):t._e()],1)],1),t.isCommentControlsShown?o("div",{ref:"commentButtons",staticClass:"tm-comment__buttons"},[t.comment.parentId?o("button",{ref:"scrollToParentButton",staticClass:"tm-comment__button tm-comment__button_with-icon",attrs:{type:"button"},on:{click:function(){t.scrollTo("#comment_"+t.comment.parentId),t.setScrollParents({comment:t.comment})}}},[o("TMSvgImg",{staticClass:"tm-comment__icon",attrs:{id:"small-arrow",title:t.msg("GO_TO_PARENT_COMMENT")}})],1):t._e(),t.getScrollParents&&t.getScrollParents[t.comment.id]?o("button",{ref:"scrollToChildButton",staticClass:"tm-comment__button tm-comment__button_with-icon",attrs:{type:"button"},on:{click:function(e){return t.scrollTo("#comment_"+t.getScrollParents[t.comment.id])}}},[o("TMSvgImg",{staticClass:"tm-comment__icon tm-comment__icon_rotated",attrs:{id:"small-arrow",title:t.msg("GO_TO_CHILD_COMMENT")}})],1):t._e()]):t._e()]),o("div",{ref:"commentBody",staticClass:"tm-comment__body-content",class:{"tm-comment__body-content_muted":t.opacity,"tm-comment__body-content_v2":t.comment.editorVersion>1},style:t.opacity,domProps:{innerHTML:t._s(t.comment.message)}}),t.galleryImages.length?o("TMGallery",{ref:"commentGallary",staticClass:"tm-comment__gallery",attrs:{"images-list":t.galleryImages}}):t._e()],1)},r=[],s=o("2f62"),i=o("f7fe"),c=o.n(i),a=o("84a2"),u=o.n(a),m=o("da18"),l=o("0414"),p=o("b7d0"),f=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("TMPopover",{staticClass:"user-info-popup",attrs:{root:t.root}},[t.user?[o("div",{staticClass:"user-info-popup__wrapper"},[o("TMUserCard",{attrs:{"is-donate-button-visible":!0,user:t.user,variant:"one-column"}})],1),o("div",{staticClass:"user-info-popup__footer"},[o("TMDescriptionList",{staticClass:"user-info-popup__stat",attrs:{title:t.msg("PROFILE_POSTS")+":",variant:"inline"}},[t._v("\n        "+t._s(t.user.counterStats.postCount)+"\n      ")]),o("TMDescriptionList",{staticClass:"user-info-popup__stat",attrs:{title:t.msg("PROFILE_COMMENTS")+":",variant:"inline"}},[t._v("\n        "+t._s(t.user.counterStats.commentCount)+"\n      ")])],1)]:o("div",{staticClass:"user-info-popup__wrapper"},[o("TMUserInfoPopupPlaceholder")],1)],2)},d=[],h=o("46ac"),b=o("3cb0"),_=o("eff8"),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user-info-popup-placeholder"},[t._m(0),o("div",{staticClass:"user-info-popup-placeholder__category-info"},[o("span",{staticClass:"user-info-popup-placeholder__category-name",style:"width: "+t.getRandomNumberFromRange(80,150)+"px"}),o("div",{staticClass:"user-info-popup-placeholder__category-description",style:"width: "+t.getRandomNumberFromRange(30,210)+"px"})])])},O=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"user-info-popup-placeholder__user-profile-data"},[o("div",{staticClass:"user-info-popup-placeholder__category-avatar"})])}],g=o("edc0"),y={name:"TMUserInfoPopupPlaceholder",methods:{getRandomNumberFromRange:g["a"]}},P=y,T=(o("e560"),o("2877")),M=Object(T["a"])(P,v,O,!1,null,null,null),C=M.exports;function j(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function w(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?j(Object(o),!0).forEach((function(e){I(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function I(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var E={name:"TMUserInfoPopup",components:{TMUserInfoPopupPlaceholder:C,TMDescriptionList:h["a"],TMUserCard:_["a"],TMPopover:b["a"]},props:{userAlias:{type:[Number,String],required:!0},root:{type:null,required:!0}},computed:w(w({},Object(s["c"])("users",["getUserByAlias"])),{},{user:function(){return this.getUserByAlias(this.userAlias)}}),created:function(){this.loadUserInfo({alias:this.userAlias})},methods:w({},Object(s["b"])("users",["loadUserInfo"]))},S=E,A=(o("7be7"),Object(T["a"])(S,f,d,!1,null,null,null)),k=A.exports,D=o("31ba"),$=o("126f"),L=o("5adb"),U=o("1559"),V=o("cefd"),B=o("cd16"),R=o("5d2c");function N(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function F(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?N(Object(o),!0).forEach((function(e){x(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):N(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function x(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var G=function(){return o.e("gallery").then(o.bind(null,"1ea6"))},H={name:"TMComment",components:{TMGallery:G,TMSvgImg:p["a"],TMUserInfo:D["a"],TMArticleCommentsLink:l["a"],TMUserInfoPopup:k},props:{comment:{type:Object,required:!0,validator:$["a"]},isCommentControlsShown:{type:Boolean,default:!0},shouldDisplayStatus:{type:Boolean,default:!0},userPopoverEnabled:Boolean},data:function(){return{userInfoPopupVisible:!1,userInfoTimer:null,shouldClosePopup:!1,galleryImages:[]}},computed:F(F(F({},Object(s["c"])("comments",["getScrollParents"])),Object(s["c"])("i18n",["langOptions"])),{},{className:function(){return this.shouldDisplayStatus?{"tm-comment__header_is-by-op":this.comment.isPostAuthor,"tm-comment__header_is-mine":this.comment.isAuthor,"tm-comment__header_is-new":this.comment.isNew,"tm-comment__header_is-readonly":this.comment.isReadonly,"tm-comment__header_is-deleted":this.comment.isSuspended}:null},datetimeStr:function(){return Object($["b"])(this.comment.timePublished)},opacity:function(){if(this.comment.score>=0||this.isHovered)return null;var t=90,e=10*this.comment.score,o=Math.abs(Math.max(-50,e));return{opacity:(t-o)/100}},handleMouseMoveThrottled:function(){return u()(this.handleMouseMove,200)},closeUserInfoPopupDebounced:function(){return c()((function(){this.shouldClosePopup&&this.closeUserInfoPopup()}),500)}}),watch:{shouldClosePopup:"closeUserInfoPopupDebounced"},mounted:function(){var t=this;this.galleryImages=Object(B["a"])(this.$refs.commentBody),Object(U["a"])(this.$el),Object(L["a"])(this.$refs.commentBody,this.msg("ERROR_IMAGE_WAS_NOT_LOADED")),Object(V["a"])(this.$el,(function(e,o){e.preventDefault(),t.$router.push({path:o.pathname})}))},beforeDestroy:function(){document.removeEventListener("mousemove",this.handleMouseMoveThrottled)},methods:F(F({},Object(s["b"])("comments",["setScrollParents"])),{},{scrollTo:function(t){Object(R["c"])(t).then((function(){return Object(m["a"])(t)}))},openUserInfoPopup:function(){this.userPopoverEnabled&&!this.userInfoPopupVisible&&(this.userInfoPopupVisible=!0,document.addEventListener("mousemove",this.handleMouseMoveThrottled))},closeUserInfoPopup:function(){this.userPopoverEnabled&&(this.userInfoPopupVisible=!1,this.shouldClosePopup=!1,document.removeEventListener("mousemove",this.handleMouseMoveThrottled))},onUserMouseenter:function(){this.userPopoverEnabled&&(clearTimeout(this.userInfoTimer),this.userInfoPopupVisible||(this.userInfoTimer=setTimeout(this.openUserInfoPopup,800)))},onUserMouseleave:function(){this.userPopoverEnabled&&!this.userInfoPopupVisible&&clearTimeout(this.userInfoTimer)},handleMouseMove:function(t){var e=t.clientX,o=t.clientY;if(this.$refs.userInfoPopup){var n=document.elementFromPoint(e,o),r=this.$refs.userInfoPopup.$el,s=this.$refs.userInfo.$el;this.shouldClosePopup=![r,s].some((function(t){return t.contains(n)}))}}})},q=H,J=(o("e01b"),Object(T["a"])(q,n,r,!1,null,null,null));e["a"]=J.exports},"7be7":function(t,e,o){"use strict";o("9907")},"828d":function(t,e,o){},"8e5c":function(t,e,o){"use strict";o("828d")},9729:function(t,e,o){},9907:function(t,e,o){},c499:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tm-comment-footer"},[t.comment.isReadonly?t._e():[t.canVoteForComment&&t.voteAction?o("TMVotesLever",{staticClass:"tm-comment-footer__votes-switcher",attrs:{"is-plusified":!0,score:t.comment.score,size:"small","vote-state":t.comment.vote.value||0,"votes-count":t.comment.votesCount},on:{downvote:function(e){return t.onVote("down")},upvote:function(e){return t.onVote("up")}}}):o("TMVotesMeter",{ref:"votesMeter",staticClass:"tm-comment-footer__votes-meter",attrs:{score:t.comment.score||0,size:"small","vote-state":t.comment.vote.value||0,"votes-count":t.comment.votesCount}}),t._t("button",(function(){return[o("TMArticleCommentsLink",{staticClass:"tm-comment-footer__button tm-comment-footer__button",attrs:{article:t.comment.post,"comment-id":t.comment.id}},[t._v("\n        "+t._s(t.msg("COMMENT_ACTION_LOOK"))+"\n      ")])]})),t.favoriteAction?o("TMBookmarksButton",{ref:"favoriteButton",staticClass:"tm-comment-footer__button tm-comment-footer__button_with-icon",attrs:{"is-bookmarked":t.comment.isFavorite,"is-counter-shown":!1,"is-processing":t.isLoadingFavorite},on:{"toggle-bookmark":t.favorite}}):t._e()],t.popupToggleVisible?o("button",{ref:"popupButton",staticClass:"tm-comment__button tm-comment__button_with-icon",attrs:{"data-comment-popup":t.comment.id},on:{click:function(e){return t.$emit("openPopup")}}},[o("TMSvgImg",{staticClass:"tm-comment__icon tm-comment__icon_dots",attrs:{id:"dots"}})],1):o("div"),t.comment.isReadonly&&!t.comment.isAuthor?[o("button",{ref:"approveButton",staticClass:"tm-comment-footer__button",attrs:{type:"button"},on:{click:function(e){return t.$emit("onModerate",!0)}}},[t._v("\n      "+t._s(t.msg("COMMENT_ACTION_APPROVE"))+"\n    ")]),o("button",{ref:"rejectButton",staticClass:"tm-comment-footer__button",attrs:{type:"button"},on:{click:function(e){return t.$emit("onModerate",!1)}}},[t._v("\n      "+t._s(t.msg("COMMENT_ACTION_REJECT"))+"\n    ")])]:t._e()],2)},r=[],s=o("2f62"),i=o("6862"),c=o("0414"),a=o("cbd6"),u=o("b7d0"),m=o("f419"),l=o("874b"),p=o("126f"),f=o("6be8");function d(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,n)}return o}function h(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?d(Object(o),!0).forEach((function(e){b(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):d(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function b(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var _=function(){return o.e("chunk-2d228e2b").then(o.t.bind(null,"daa9",7))},v={name:"TMCommentFooter",components:{TMBookmarksButton:a["a"],TMSvgImg:u["a"],TMVotesLever:m["a"],TMVotesMeter:l["a"],TMWarningIcon:_,TMArticleCommentsLink:c["a"]},props:{comment:{type:Object,required:!0,validator:p["a"]},voteAction:{type:Function,default:null},favoriteAction:{type:Function,default:null},popupToggleVisible:Boolean},data:function(){return{isLoadingFavorite:!1}},computed:h(h(h({},Object(s["c"])("me",["isLoggedIn","isSuperAdmin","userAlias"])),Object(s["e"])("me",["user"])),{},{article:function(){return this.comment.post},voteStateStr:function(){return Object(f["b"])(this.comment.vote.value)},canVoteForComment:function(){return this.comment.vote&&this.comment.vote.isCanVote}}),methods:{onVote:function(t){var e=this,o="up"===t?"plus":"minus";this.voteAction({id:this.comment.id,direction:t}).then((function(){Object(i["c"])("comment",o,e.userAlias)})).catch((function(t){e.$toast(t.message)}))},favorite:function(){var t=this;if(this.isLoggedIn){var e=this.comment,o=(new Date).getTime(),n=1e3;this.isLoadingFavorite=!0,this.favoriteAction(e).then((function(){var e=(new Date).getTime()-o,r=e<n?n-e:0;setTimeout((function(){t.isLoadingFavorite=!1}),r)}))}else this.$toast.error(this.msg("AUTH_REQUIRED"))}}},O=v,g=(o("8e5c"),o("2877")),y=Object(g["a"])(O,n,r,!1,null,null,null);e["a"]=y.exports},e01b:function(t,e,o){"use strict";o("e75d")},e560:function(t,e,o){"use strict";o("9729")},e75d:function(t,e,o){},f877:function(t,e,o){"use strict";o("3d84")}}]);
//# sourceMappingURL=chunk-0b457fbc.2550e590.js.map